{"version":3,"sources":["webpack://mesto/./src/components/Card.js","webpack://mesto/./src/components/FormValidator.js","webpack://mesto/./src/components/Popup.js","webpack://mesto/./src/components/PopupWithImage.js","webpack://mesto/./src/components/PopupWithForm.js","webpack://mesto/./src/components/PopupDeleteCard.js","webpack://mesto/./src/components/UserInfo.js","webpack://mesto/./src/components/Section.js","webpack://mesto/./src/utils/contains.js","webpack://mesto/./src/pages/index.js","webpack://mesto/./src/components/Api.js"],"names":["Card","data","templateSelector","userID","handleCardClick","handleDeleteClick","handleLikeClick","this","_name","name","id","_id","_sourceImage","link","_templateSelector","_handleCardClick","_handleDeleteClick","_handleLikeClick","_userID","_owner","owner","_likes","likes","liked","some","like","_likeCount","textContent","length","_cardTemplate","document","querySelector","content","card","cloneNode","_cardImage","_likeButton","_deleteButton","src","alt","style","display","_setLikeCount","remove","classList","toggle","addEventListener","then","_switchLike","_getTemplate","isLiked","_addContent","_addListeners","FormValidator","validConfig","formElement","_validConfig","_formElement","_inputList","Array","from","querySelectorAll","inputSelector","_buttonElement","submitButtonSelector","inputElement","errorMessage","errorElement","errorIdPostfix","add","inputErrorClass","errorClass","validity","valid","_hideInputError","_showInputError","validationMessage","_hasInvalidInput","inactiveButtonClass","disabled","forEach","_checkInputValidity","_toggleButtonState","_resetValidationState","_setEventListeners","Popup","popupSelector","_popup","_closeButton","_handleEscClose","bind","close","_handleClickClose","removeEventListener","evt","key","target","contains","PopupWithImage","_title","_image","cardTitle","PopupWithForm","handleSubmit","form","submitButton","submitButtonText","_handleSubmit","_eventClosePopup","CustomEvent","_formValues","input","value","Object","keys","setInputValues","reset","dispatchEvent","_renderLoading","isLoading","_listener","preventDefault","_getInputValues","PopupDeleteCard","UserInfo","selectorUserName","selectorUserDescription","selectorAvatar","_description","_avatar","description","Section","containerSelector","_container","renderer","items","_items","reverse","item","prepend","profileButtonEdit","profileButtonAdd","addAvatarButton","api","options","_baseUrl","baseUrl","_headers","headers","res","ok","json","Promise","reject","Error","status","fetch","_getResponseData","method","body","JSON","stringify","about","catch","e","console","error","message","authorization","userInfo","popupWithImage","popupDeleteCard","deleteCard","popupProfile","setUserData","setUserInfo","popupAddAvatar","addAvatar","setUserAvatar","avatar","all","getUserData","getInitialCards","values","userData","initialCards","cardSection","open","switchLike","addItem","createCard","renderItems","popupPlace","addCard","enableValidation","setEventListeners","getUserInfo","addAvatarValid"],"mappings":"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","file":"index.js","sourcesContent":["\r\nexport default class Card {\r\n  constructor(data, templateSelector, userID, handleCardClick, handleDeleteClick, handleLikeClick) {\r\n    this._name = data.name;\r\n    this.id = data._id;\r\n    this._sourceImage = data.link;\r\n    this._templateSelector = templateSelector;\r\n    this._handleCardClick = handleCardClick;\r\n    this._handleDeleteClick = handleDeleteClick;\r\n    this._handleLikeClick = handleLikeClick;\r\n    this._userID = userID;\r\n    this._owner = userID === data.owner._id;\r\n    this._likes = data.likes;\r\n    this.liked = false;\r\n  }\r\n\r\n  isLiked() {\r\n    return this.liked = this._likes.some(like => like._id === this._userID);\r\n  }\r\n\r\n  _setLikeCount(likes) {\r\n    this._likeCount.textContent = likes.length;\r\n  }\r\n\r\n  _getTemplate() {\r\n    this._cardTemplate = document.querySelector(this._templateSelector).content;\r\n    this.card = this._cardTemplate.querySelector('.card').cloneNode(true);\r\n    this._cardImage = this.card.querySelector('.card__image');\r\n    this._likeButton = this.card.querySelector('.card__like');\r\n    this._deleteButton = this.card.querySelector('.card__delete');\r\n    this._likeCount = this.card.querySelector('.card__like-count');\r\n  }\r\n\r\n  _addContent () {\r\n    this.card.querySelector('.card__title').textContent = this._name;\r\n    this._cardImage.src = this._sourceImage;\r\n    this._cardImage.alt = this._name;\r\n    if (this._owner ) this._deleteButton.style.display = 'block';\r\n    this._likeCount.textContent = this._likes.length;\r\n    this._setLikeCount(this._likes)\r\n  }\r\n\r\n  deleteCard () {\r\n    this.card.remove();\r\n    this.card = null;\r\n  }\r\n\r\n  _switchLike() {\r\n    this._likeButton.classList.toggle('card__like_active');\r\n  }\r\n\r\n  _addListeners () {\r\n    this._deleteButton.addEventListener('click', () => {\r\n      this._handleDeleteClick();\r\n      })\r\n    this._likeButton.addEventListener('click', () => {\r\n      this._handleLikeClick()\r\n        .then((data) => {\r\n          this._setLikeCount(data.likes)\r\n          this._switchLike();\r\n          this.liked = !this.liked;\r\n        })\r\n    })\r\n    this._cardImage.addEventListener('click', () => {\r\n      this._handleCardClick(this.card);\r\n    })\r\n  }\r\n\r\n  createCard () {\r\n    this._getTemplate();\r\n    if (this.isLiked()) this._switchLike();\r\n    this._addContent();\r\n    this._addListeners();\r\n    return this.card\r\n  }\r\n}","export default class FormValidator {\r\n  constructor(validConfig, formElement) {\r\n    this._validConfig = validConfig;\r\n    this._formElement = formElement;\r\n    this._inputList = Array.from(formElement.querySelectorAll(validConfig.inputSelector));\r\n    this._buttonElement = formElement.querySelector(validConfig.submitButtonSelector);\r\n  }\r\n\r\n  _showInputError(inputElement, errorMessage) {\r\n    const errorElement = this._formElement.querySelector('#' + inputElement.id + this._validConfig.errorIdPostfix);\r\n    inputElement.classList.add(this._validConfig.inputErrorClass);\r\n    errorElement.textContent = errorMessage;\r\n    errorElement.classList.add(this._validConfig.errorClass);\r\n  }\r\n\r\n  _hideInputError(inputElement) {\r\n    const errorElement = this._formElement.querySelector('#' + inputElement.id + this._validConfig.errorIdPostfix);\r\n    inputElement.classList.remove(this._validConfig.inputErrorClass);\r\n    errorElement.textContent = '';\r\n    errorElement.classList.remove(this._validConfig.errorClass);\r\n  }\r\n\r\n  _checkInputValidity(inputElement) {\r\n    if (!inputElement.validity.valid) {\r\n      this._showInputError(inputElement, inputElement.validationMessage);\r\n    } else {\r\n      this._hideInputError(inputElement);\r\n    }\r\n  }\r\n\r\n  _hasInvalidInput() {\r\n    return this._inputList.some(inputElement => {\r\n      return !inputElement.validity.valid;\r\n    })\r\n  }\r\n\r\n  _toggleButtonState() {\r\n    if (this._hasInvalidInput(this._inputList)) {\r\n      this._buttonElement.classList.add(this._validConfig.inactiveButtonClass);\r\n      this._buttonElement.disabled = true;\r\n    } else {\r\n      this._buttonElement.classList.remove(this._validConfig.inactiveButtonClass);\r\n      this._buttonElement.disabled = false;\r\n    }\r\n  }\r\n\r\n  _setEventListeners() {\r\n    this._inputList.forEach(inputElement => {\r\n      inputElement.addEventListener('input', () => {\r\n        this._checkInputValidity(inputElement);\r\n        this._toggleButtonState();\r\n      })\r\n    })\r\n    this._formElement.addEventListener('closePopup', () => {\r\n      this._resetValidationState();\r\n    })\r\n  }\r\n\r\n  _resetValidationState() {\r\n    this._inputList.forEach(inputElement => {\r\n      this._hideInputError(inputElement);\r\n    })\r\n    this._toggleButtonState();\r\n  }\r\n\r\n  enableValidation () {\r\n    this._setEventListeners();\r\n  }\r\n}","export default class Popup {\r\n  constructor(popupSelector) {\r\n    this._popup = document.querySelector(popupSelector);\r\n    this._closeButton = this._popup.querySelector('.popup__close');\r\n    this._handleEscClose = this._handleEscClose.bind(this);\r\n    this.close = this.close.bind(this);\r\n    this._handleClickClose = this._handleClickClose.bind(this);\r\n  }\r\n\r\n  open () {\r\n    this._popup.classList.add('popup_show');\r\n    document.addEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  close () {\r\n    this._popup.classList.remove('popup_show');\r\n    document.removeEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  _handleEscClose (evt) {\r\n    if (evt.key == 'Escape') {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  _handleClickClose (evt) {\r\n    if (evt.target.classList.contains('popup')) {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  setEventListeners () {\r\n    this._popup.addEventListener('mousedown', this._handleClickClose);\r\n    this._closeButton.addEventListener('click', this.close);\r\n  }\r\n}","import Popup from \"./Popup.js\";\r\n\r\nexport default class PopupWithImage extends Popup{\r\n  constructor(popupSelector) {\r\n    super(popupSelector);\r\n    this._title = this._popup.querySelector('.popup__image-title');\r\n    this._image = this._popup.querySelector('.popup__image');\r\n  }\r\n\r\n  open (card) {\r\n    const cardTitle = card.querySelector('.card__title').textContent;\r\n    this._title.textContent = cardTitle;\r\n    this._image.src = card.querySelector('.card__image').src;\r\n    this._image.alt = `${cardTitle} - полный размер`;\r\n    super.open();\r\n  }\r\n}","import Popup from \"./Popup.js\";\r\n\r\nexport default class PopupWithForm extends Popup{\r\n  constructor(popupSelector, handleSubmit) {\r\n    super(popupSelector);\r\n    this._inputList = this._popup.querySelectorAll('.popup__text-input');\r\n    this.form = this._popup.querySelector('.popup__form');\r\n    this.submitButton = this._popup.querySelector('.popup__submit');\r\n    this.submitButtonText = this.submitButton.textContent;\r\n    this._handleSubmit = handleSubmit;\r\n    this._eventClosePopup = new CustomEvent('closePopup');\r\n  }\r\n\r\n  _getInputValues () {\r\n    this._formValues = {};\r\n    this._inputList.forEach(input => {\r\n      this._formValues[input.name] = input.value;\r\n    });\r\n    return this._formValues;\r\n  }\r\n\r\n  setInputValues (data) {\r\n    Object.keys(data).forEach(name => {\r\n      const input = this.form.querySelector(`input[name=popup-${name}]`)\r\n      input.value = data[name];\r\n    })\r\n  }\r\n\r\n  open(data) {\r\n    super.open();\r\n    if (data) {\r\n      this.setInputValues(data);\r\n    }\r\n  }\r\n\r\n  close() {\r\n    super.close();\r\n    this.form.reset();\r\n    this.form.dispatchEvent(this._eventClosePopup);\r\n    this._renderLoading(false);\r\n  }\r\n\r\n  _renderLoading(isLoading) {\r\n    this.submitButton.textContent = isLoading ? 'Сохранение' : this.submitButtonText;\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._listener = ((evt) => {\r\n      evt.preventDefault();\r\n      this._renderLoading(true);\r\n      this._handleSubmit(this._getInputValues())\r\n    });\r\n    this.form.addEventListener('submit', this._listener);\r\n  }\r\n\r\n  _removeEventListeners() {\r\n    super._removeEventListeners();\r\n    this.form.removeEventListener('submit', this._listener)\r\n  }\r\n}","import Popup from \"./Popup\";\n\nexport default class PopupDeleteCard extends Popup {\n  constructor(popupSelector, handleSubmit) {\n    super(popupSelector);\n    this.form = this._popup.querySelector('.popup__form');\n    this._handleSubmit = handleSubmit;\n  }\n\n  open(card) {\n    super.open();\n    this.card = card;\n  }\n\n  setEventListeners() {\n    super.setEventListeners();\n    this._listener = ((evt) => {\n      evt.preventDefault();\n      this._handleSubmit(this.card)\n    });\n    this.form.addEventListener('submit', this._listener);\n  }\n\n  _removeEventListeners() {\n    super._removeEventListeners();\n    this.form.removeEventListener('submit', this._listener)\n  }\n}","export default class UserInfo {\r\n  constructor(selectorUserName, selectorUserDescription, selectorAvatar) {\r\n    this._name = document.querySelector(selectorUserName);\r\n    this._description = document.querySelector(selectorUserDescription);\r\n    this._avatar = document.querySelector(selectorAvatar);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return {\r\n      name: this._name.textContent,\r\n      description: this._description.textContent\r\n    }\r\n  }\r\n\r\n  setUserInfo(data) {\r\n    this._name.textContent = data.name;\r\n    this._description.textContent = data.description;\r\n  }\r\n\r\n  setUserAvatar(src) {\r\n    this._avatar.src = src;\r\n  }\r\n}","export default class Section {\r\n  constructor(data, containerSelector) {\r\n    this._container =document.querySelector(containerSelector);\r\n    this.renderer = data.renderer;\r\n  }\r\n\r\n  renderItems(items = this._items) {\r\n    items.reverse().forEach(item => {\r\n      this.renderer(item);\r\n    });\r\n  }\r\n\r\n  addItem(item) {\r\n    this._container.prepend(item);\r\n  }\r\n\r\n}","const validConfig = {\r\n  inputSelector: '.popup__text-input',\r\n  submitButtonSelector: '.popup__submit',\r\n  inactiveButtonClass: 'popup__submit_disabled',\r\n  inputErrorClass: 'popup__text-input_type_error',\r\n  errorClass: 'popup__error_show',\r\n  errorIdPostfix: '-error'\r\n}\r\n\r\nconst profileButtonEdit = document.querySelector('.profile__edit');\r\nconst profileButtonAdd = document.querySelector('.profile__add');\r\nconst addAvatarButton = document.querySelector('.profile__edit-avatar');\r\n\r\n\r\nexport { validConfig, profileButtonAdd, profileButtonEdit, addAvatarButton}","//Арина, огромное спасибо за ревью! Ваши советы очень полезны. Не знал про Promise.all.\r\nimport './index.css';\r\nimport Card from '../components/Card';\r\nimport FormValidator from \"../components/FormValidator\";\r\nimport PopupWithImage from \"../components/PopupWithImage\";\r\nimport PopupWithForm from \"../components/PopupWithForm\";\r\nimport PopupDeleteCard from \"../components/PopupDeleteCard\";\r\nimport UserInfo from \"../components/UserInfo\";\r\nimport Section from \"../components/Section\";\r\nimport {validConfig, profileButtonEdit, profileButtonAdd, addAvatarButton} from \"../utils/contains\";\r\nimport Api from \"../components/Api\";\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-19/',\r\n  headers: {\r\n    authorization: '7a0583fa-0284-4573-a326-4d7fa2ed6e73',\r\n    'Content-Type': 'application/json'\r\n  }\r\n})\r\n\r\nconst userInfo = new UserInfo(\r\n  '.profile__name',\r\n  '.profile__description',\r\n  '.profile__avatar');\r\n\r\nconst popupWithImage = new PopupWithImage('.popup_image');\r\nconst popupDeleteCard = new PopupDeleteCard('.popup_delete', (card) => {\r\n  return api.deleteCard(card)\r\n    .then(() => {\r\n      card.deleteCard();\r\n      popupDeleteCard.close();\r\n    })\r\n    .catch(e => console.error(e.message))\r\n});\r\n\r\nconst popupProfile = new PopupWithForm('.popup_profile', (data) => {\r\n  return api.setUserData({name: data['popup-name'], about: data['popup-description']})\r\n    .then(data => {\r\n      userInfo.setUserInfo({name: data.name, description: data.about});\r\n      popupProfile.close();\r\n    })\r\n    .catch(e => console.error(e.message));\r\n});\r\n\r\nconst popupAddAvatar = new PopupWithForm('.popup_add-avatar', (data) => {\r\n  return api.addAvatar(data['avatar-link'])\r\n    .then((data) => {\r\n      userInfo.setUserAvatar(data.avatar);\r\n      popupAddAvatar.close();\r\n    })\r\n    .catch(e => console.error(e.message));\r\n});\r\n\r\nPromise.all([\r\n  api.getUserData(),\r\n  api.getInitialCards()\r\n])\r\n  .then(values => {\r\n    const [userData, initialCards] = values;\r\n\r\n    userInfo.setUserInfo({name: userData.name, description: userData.about});\r\n    userInfo.setUserAvatar(userData.avatar);\r\n\r\n    const cardSection = new Section({\r\n      renderer: (data) => {\r\n        const card = new Card(data,\r\n          '#card-template',\r\n          userData._id,\r\n          () => {\r\n            popupWithImage.open(card.card);\r\n          },\r\n          () => {\r\n            popupDeleteCard.open(card)\r\n          },\r\n          () => {\r\n            const method = card.liked ? 'DELETE' : 'PUT';\r\n            return api.switchLike(card, method)\r\n          });\r\n        cardSection.addItem(card.createCard());\r\n      }\r\n    }, '.gallery__list');\r\n\r\n    cardSection.renderItems(initialCards);\r\n\r\n    const popupPlace = new PopupWithForm('.popup_new-place', (data) => {\r\n      return api.addCard({name: data['popup-name'], link: data['popup-description']})\r\n        .then(data => {\r\n          cardSection.renderer(data);\r\n          popupPlace.close();\r\n        })\r\n        .catch(e => console.error(e.message));\r\n    });\r\n\r\n    profileButtonAdd.addEventListener('click', () => popupPlace.open());\r\n    const newPlacePopupValid = new FormValidator(validConfig, popupPlace.form);\r\n    newPlacePopupValid.enableValidation();\r\n    popupPlace.setEventListeners();\r\n  })\r\n  .catch(e => console.error(e.message))\r\n\r\nprofileButtonEdit.addEventListener('click', () => popupProfile.open(userInfo.getUserInfo()));\r\naddAvatarButton.addEventListener('click', () => popupAddAvatar.open());\r\n\r\nconst addAvatarValid = new FormValidator(validConfig, popupAddAvatar.form);\r\nconst profilePopupValid = new FormValidator(validConfig, popupProfile.form);\r\n\r\nprofilePopupValid.enableValidation();\r\naddAvatarValid.enableValidation();\r\n\r\npopupProfile.setEventListeners();\r\npopupAddAvatar.setEventListeners();\r\npopupWithImage.setEventListeners();\r\npopupDeleteCard.setEventListeners();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","export default class Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  _getResponseData(res) {\n      if (res.ok) return res.json()\n      return Promise.reject(new Error(`Ошибка: ${res.status}`))\n  }\n\n  getUserData() {\n    return fetch(`${this._baseUrl}users/me`, {\n      headers: this._headers\n    })\n      .then(res => {\n        return this._getResponseData(res)\n      })\n  }\n\n  setUserData(data) {\n    return fetch(`${this._baseUrl}users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    })\n      .then(res => {\n        return this._getResponseData(res)\n      })\n  }\n\n  getInitialCards () {\n    return fetch(`${this._baseUrl}cards`, {\n      headers: this._headers\n    })\n      .then(res => {\n        return this._getResponseData(res)\n      })\n  }\n\n  addCard(data) {\n    return fetch(`${this._baseUrl}cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    })\n      .then(res => {\n        return this._getResponseData(res)\n      })\n  }\n\n  deleteCard(data) {\n    return fetch(`${this._baseUrl}cards/${data.id}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n      .then(res => {\n        return this._getResponseData(res)\n      })\n  }\n\n  switchLike(data, method) {\n    return fetch(`${this._baseUrl}cards/likes/${data.id}`, {\n      method: method,\n      headers: this._headers\n    })\n      .then(res => {\n        return this._getResponseData(res)\n      })\n  }\n\n  addAvatar(link) {\n    return fetch(`${this._baseUrl}users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        \"avatar\": link\n      })\n    })\n      .then(res => {\n        return this._getResponseData(res)\n      })\n      .catch(e => console.error(e.message))\n  }\n}"],"sourceRoot":""}